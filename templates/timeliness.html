{% extends 'base.html' %}
{% import 'boxes.html' as boxes %}
{% block content %}
    <div class="row">
    <div class="col-md-6">
    <div class="panel panel-default">
        <div class="panel-heading"><h3 class="panel-title" id="list_fail_validation">Table of Contents</h3></div>
        <div class="panel-body">
            <ul>
                <li><a href="#h_frequency">Frequency</a></li>
                <li><a href="#h_timelag">Time lag</a></li>
            </ul>
        </div>
    </div>
    </div>
    </div>

    <h2 id="h_frequency">Frequency</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <td>Publisher Name</td>
                {% for month in previous_months %}
                <td>{{month}}</td>
                {% endfor %}
                <td>Assesment</td>
            </tr>
        </thead>
        <tbody>
            {% for publisher, updates_per_month, frequency in publisher_frequency() %}
            <tr>
                <td><a href="publisher/{{publisher}}.html">{{publisher_name[publisher]}}</a></td>
                {% for month in previous_months %}
                <td>{{updates_per_month[month]}}</td>
                {% endfor %}
                <td>{{frequency}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <h2 id="h_timelag">Time lag</h2>
    <table class="table table-striped">
        <thead>
            <tr>
                <td>Publisher Name</td>
                {% for month in previous_months %}
                <td>{{month}}</td>
                {% endfor %}
                <td>Assesment</td>
            </tr>
        </thead>
        <tbody>
            {% for publisher_title,publisher in publishers_ordered_by_title %}
            {% set publisher_stats = get_publisher_stats(publisher) %}
            <tr>
                <td><a href="publisher/{{publisher}}.html">{{publisher_title}}</a></td>
                {% for month in previous_months %}
                <td>{{publisher_stats.transaction_months_with_year[month]}}</td>
                {% endfor %}
                <td>{{publisher_stats.timelag}}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}
